<html>
    <body onload="init()">
        <canvas id="can" width="400" height="400" style="position:absolute;top:10%;left:10%;border:2px solid;"></canvas>
		<input type = "button" value = "Save" size= "23" onclick="saveImg()" style = "position:absolute; top:80%; left: 10%"/>
		<input type = "button" value = "Clear" size= "25" onclick="erase()" style = "position:absolute; top:80%; left: 15%"/>
    </body>
    <script type="text/javascript">
		var canvas, ctx, isDragging = false;
		var	previousX = 0;
		var previousY = 0;
		var currentX = 0;
		var currentY = 0,
			dot_flag = false;

		var x = "black";
		// variable for how think the line is
		var lineThickness = 3;
	   
		function init() {
			canvas = document.getElementById('can');
			ctx = canvas.getContext("2d");
			w = canvas.width;
			h = canvas.height;
	   
			canvas.addEventListener("mousemove", function (e) {
				findxy('move', e)
			}, false);
			canvas.addEventListener("mousedown", function (e) {
				findxy('down', e)
			}, false);
			canvas.addEventListener("mouseup", function (e) {
				findxy('up', e)
			}, false);
			canvas.addEventListener("mouseout", function (e) {
				findxy('out', e)
			}, false);
		}
	   
		// draw the line
		function draw() {
			ctx.beginPath();
			ctx.moveTo(previousX, previousY);
			ctx.lineTo(currentX, currentY);
			ctx.strokeStyle = x;
			ctx.lineWidth = lineThickness;
			ctx.stroke();
			ctx.closePath();
		}
	   
		//get mouse coordinates relative to the canvas
		function findxy(res, e) {
			if (res == 'down') {
				previousX = currentX;
				previousY = currentY;
				currentX = e.clientX - canvas.offsetLeft;
				currentY = e.clientY - canvas.offsetTop;
	   
				isDragging = true;
				dot_flag = true;
				if (dot_flag) {
					ctx.beginPath();
					ctx.fillStyle = x;
					ctx.fillRect(currentX, currentY, 2, 2);
					ctx.closePath();
					dot_flag = false;
				}
			}
			if (res == 'up' || res == "out") {
				isDragging = false;
			}
			if (res == 'move') {
				if (isDragging) {
					previousX = currentX;
					previousY = currentY;
					currentX = e.clientX - canvas.offsetLeft;
					currentY = e.clientY - canvas.offsetTop;
					draw();
				}
			}
		}
		
		function saveImg()
		{
			var data = ctx.getImageData(0, 0, 400, 400);
		}
		
		function erase()
		{
			ctx.clearRect(0, 0, w, h);

		}
    </script>
</html>